<div fxLayout="column" class="p-1">
  <div class="bd-card w-100" style="position: relative;">
    <div *ngIf="isLoading" class="table-loading-container" fxLayoutAlign="center center">
      <mat-spinner></mat-spinner>
    </div>

    <div class="pt-1 pb-2 pl-1">
      <div fxLayout="row wrap">
        <div class="mb-1" [fxFlex]="100">
          {{name}} ({{from}} - {{to}}) {{assignedDateLabel}}
        </div>
        <div class="mb-1 pr-1 custom-input wrapper-no-padding-bottom" [fxFlex.gt-sm]="16.6666666667" [fxFlex]="100">
          <app-custom-select-autocomplete #selectTeams [label]="'Nhóm'" [keyName]="'name'" [keyValue]="'id'" (emitValue)="getSelectedTeams($event)"></app-custom-select-autocomplete>
        </div>
        <div class="mb-1 pr-1 custom-input wrapper-no-padding-bottom" [fxFlex.gt-sm]="16.6666666667" [fxFlex]="100">
          <app-custom-select-autocomplete #selectUsers [label]="'Nhân viên'" [keyName]="'name'" [keyValue]="'id'" (emitValue)="getSelectedusers($event)"></app-custom-select-autocomplete>
        </div>
        <mat-form-field class="pr-1 custom-input" appearance="outline" [fxFlex.gt-sm]="16.6666666667" [fxFlex]="100">
          <mat-label>
            Số lượng
          </mat-label>
          <input matInput type="number" autocomplete="off" [(ngModel)]="quantity" (focusout)="outQuantity()">
        </mat-form-field>
        <mat-form-field class="pr-1 custom-input" appearance="outline" [fxFlex.gt-sm]="16.6666666667" [fxFlex]="100">
          <mat-label>
            Bắt đầu từ
          </mat-label>
          <input matInput type="number" autocomplete="off" [(ngModel)]="start" (focusout)="outStart()">
        </mat-form-field>
        <div class="pr-1 custom-button" [fxFlex.gt-sm]="16.6666666667" [fxFlex]="100">
          <button mat-raised-button color="primary" class="mr-1" (click)="onCreate()">Tạo</button>
          <button mat-raised-button (click)="onCancel()">Hủy</button>
        </div>
      </div>
    </div>

    <div *ngFor="let item of templateSources; let i = index">
      <app-contact-sources-fields [index]="i" [length]="templateSources.length" [data]="item" [usersList]="usersList" (output)="eventEmit($event)" #ContactSourcesFieldsComponentView></app-contact-sources-fields>
    </div>
    <div class="px-1 pb-1">
      <button *ngIf="isButton" mat-raised-button color="primary" type="submit" (click)="onSubmit()">
        <span>Thêm</span>
      </button>
    </div>
  </div>
</div>
